flowchart LR
  subgraph Sensors
    A[Mic Array
4ch or 8ch] --> B[Audio Capture]
    G[Camera(s)
1 or 3] --> H[Video Capture]
  end

  subgraph Audio
    B --> C[DOA Heatmap
SRP-PHAT over 0..360]
    B --> D[Beamformer
Delay-and-Sum]
    D --> E[Denoise
(optional)]
  end

  subgraph Vision
    H --> V1[Face Track]
    V1 --> V2[Mouth Activity Score]
    V2 --> V3[Face Bearing -> Global Azimuth]
  end

  subgraph Fusion
    C --> F1[AV Association
DOA peaks <-> faces]
    V3 --> F1
    F1 --> F2[Target Lock State Machine]
    F2 --> D
  end

  E --> OUT[Output Sink]
  C --> UI[Web UI]
  V3 --> UI
  F2 --> UI
